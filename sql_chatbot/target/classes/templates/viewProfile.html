<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>View Profile</title>
    <th:block th:insert="~{include.html}" />
</head>
<body>
<th:block th:insert="~{header.html}" />
<h1>View your profile:</h1>
<div class="container">
    <div class="row bg-light">
        <div class="col m-2">
            <span>Username:</span>
        </div>
        <div class="col m-2">
            <form id="usernameForm" method="post" th:action="@{'/username_edited'}" th:if="${userUsername}">
                <input type="text" placeholder="Enter your new username" name="newUsername" id="newUsername">
                <button type="submit">Change Username</button>
            </form>
            <span th:text="${user.getUsername()}" th:unless="${userUsername}"></span>
        </div>
        <div class="col m-2">
            <form method="post" th:action="@{'/edit_username'}" th:unless="${userUsername}">
                <a href="#" onclick="this.parentNode.submit()">
                    Edit Username?
                </a>
            </form>
        </div>
    </div>
    <div class="row bg-light">
        <div class="col m-2">
            <span>Password:</span>
        </div>
        <div class="col m-2">
            <form method="post" th:action="@{'/password_edited'}" th:if="${userPassword}">
                <input type="password" onkeyup="checkPasswordStrength()" placeholder="Enter your new password" name="newPassword" id="password">
                <input type="password" placeholder="Repeat Password" name="newRepeatedPassword" id="newRepeatedPassword">
                <button type="submit">Change Password</button>
            </form>
            <span th:unless="${userPassword}">●●●●●●●●●●●●</span>
        </div>
        <div class="col m-2">
            <form method="post" th:action="@{'/edit_password'}" th:unless="${userUsername}">
                <a href="#" onclick="this.parentNode.submit()">
                    Edit Password?
                </a>
            </form>
        </div>
    </div>
    <div class="row bg-light">
        <div class="col m-2">
            <span>Huggingface API Token:</span>
        </div>
        <div class="col m-2">
            <form method="post" th:action="@{'/huggingfacetoken_edited'}" th:if="${userHuggingFaceToken}">
                <input type="text" placeholder="Enter your new HuggingFace API Token" name="newHuggingFaceToken" id="newHuggingFaceToken">
                <button type="submit">Change HuggingFace API Token</button>
            </form>
            <span th:text="${user.getHuggingFaceAPIToken()}" th:unless="${userHuggingFaceToken}"></span>
        </div>
        <div class="col m-2">
            <form method="post" th:action="@{'/edit_huggingfacetoken'}" th:unless="${userHuggingFaceToken}">
                <a href="#" onclick="this.parentNode.submit()">
                    Edit HuggingFace API Token?
                </a>
            </form>
        </div>
    </div>
</div>
<div id="passwordStrength" onchange="displayStrength()" th:if="${userPassword}"></div>
<div style="color: red;" th:if="${session?.exception}" th:text="${session?.exception}"></div>
<div style="color: red;" th:if="${session?.passwordError}" th:text="${session?.passwordError}"></div>
<div style="color: red;" th:if="${session?.sameUsernameError}" th:text="${session?.sameUsernameError}"></div>
<div style="color: red;" th:if="${session?.huggingFaceTokenError}" th:text="${session?.huggingFaceTokenError}"></div>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
<script type="text/javascript" src="https://cdn.usebootstrap.com/bootstrap/4.1.3/js/bootstrap.bundle.min.js"></script>
<script type="text/javascript" src="/js/scripts.js"></script>
</body>
</html>